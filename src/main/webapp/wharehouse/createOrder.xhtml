<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

<ui:composition>
    <h:form>

        <p:panel style="width: 100%">
            <!-- New item-->
            <h:panelGrid columns="2" cellpadding="5" id="current">
                <f:facet name="header">Новий товар</f:facet>
                <h:outputLabel for="name" value="Назва товару: "/>
                <p:inputText id="name" value="#{orderBean.name}" required="true"/>

                <h:outputLabel for="measures" value="Одиниця виміру: "/>
                <p:selectOneMenu id="measures" value="#{orderBean.measurementUnit}">
                    <f:selectItem itemLabel="pcs" itemValue="pcs"/>
                    <f:selectItem itemLabel="kg" itemValue="kg"/>
                    <f:selectItem itemLabel="l" itemValue="l"/>
                    <f:selectItem itemLabel="g" itemValue="g"/>
                    <f:selectItem itemLabel="m" itemValue="m"/>
                </p:selectOneMenu>

                <h:outputLabel for="description" value="Опис  товару: "/>
                <p:inputTextarea id="description" rows="2" cols="50" value="#{orderBean.description}"/>

                <h:outputLabel for="quantity" value="Кількість: "/>
                <p:inputText id="quantity" maxlength="3" value="#{orderBean.quantity}" required="true"
                             style="width: 33px"/>
            </h:panelGrid>

            <!-- Add item button-->
            <p:commandButton actionListener="#{orderBean.addCommodity()}" value="Додати товар" ajax="true"
                             update="orderItems">
            </p:commandButton>

            <p:commandButton actionListener="#{orderBean.saveOrder}" value="Зберегти замовлення" ajax="true"
                             update="orderItems">
            </p:commandButton>

            <!-- Added items -->
            <ui:param name="counter" value="0"/>

            <p:dataTable id="orderItems" var="item" value="#{orderBean.currentOrder.store}" rowIndexVar="index">
                <p:column headerText="№">
                    <h:outputText value="#{index+1}"/>
                </p:column>
                <p:column headerText="Назав товару">
                    <h:outputText value="#{item.commodity.name}"/>
                </p:column>

                <p:column headerText="Опис товару">
                    <h:outputText value="#{item.commodity.description}"/>
                </p:column>

                <p:column headerText="Кількість">
                    <h:outputText value="#{item.quantity} #{item.commodity.measurementUnit}"/>
                </p:column>
                <p:column style="width: 75px">
                    <p:commandButton actionListener="#{orderBean.removeCommodity(index)}" value="Видалити"
                                     update="orderItems"
                                     ajax="true">
                    </p:commandButton>
                </p:column>

            </p:dataTable>
        </p:panel>
    </h:form>
</ui:composition>
</html>